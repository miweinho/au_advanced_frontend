@if (card) {
  <div class="card-container">
    <div class="credit-card">
      <div class="issuer">{{ card.issuer }}</div>
      <div class="card-number">{{ card.cardNumber }}</div>
      <div class="card-holder">
        <span>{{ card.cardHolderName }}</span>
      </div>
      <div class="card-info">
        <div>EXP: {{ card.expirationMonth }}/{{ card.expirationYear }}</div>
        <div>CSC: {{ card.cscCode }}</div>
      </div>
    </div>

    <h3 class="transactions-title">Transactions</h3>

    @if (transactions.length > 0) {
      <table class="transactions-table">
        <thead>
        <tr>
          <th>Date</th>
          <th>Currency</th>
          <th>Amount</th>
        </tr>
        </thead>
        <tbody>
        @for (tx of transactions; track $index) {
          <tr>
            <td>{{ tx.date || tx.transactionDate || tx.createdAt | date:'dd/MM/yyyy' }}</td>
            <td>{{ tx.currency || tx.currencyCode }}</td>
            <td>{{ tx.amount | number:'1.2-2' }}</td>
          </tr>
        }
        </tbody>
      </table>
    } @else {
      <p class="no-tx">No transactions found for this card.</p>
    }

    <button class="remove-btn" (click)="removeCard()">Remove Card</button>
  </div>
} @else {
  @if (loading) {
    <p>Loading card details...</p>
  }
  @if (error) {
    <p>{{ error }}</p>
  }
}
