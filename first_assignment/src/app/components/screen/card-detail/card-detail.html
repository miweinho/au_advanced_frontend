<div class="card-container" *ngIf="card; else loadingOrError">
  <div class="credit-card">
    <div class="issuer">{{ card.issuer }}</div>
    <div class="card-number">{{ card.cardNumber }}</div>
    <div class="card-holder">
      <span>{{ card.cardHolderName }}</span>
    </div>
    <div class="card-info">
      <div>EXP: {{ card.expirationMonth }}/{{ card.expirationYear }}</div>
      <div>CSC: {{ card.cscCode }}</div>
    </div>
  </div>

  <h3 class="transactions-title">Transactions</h3>

  <table class="transactions-table" *ngIf="transactions.length > 0; else noTransactions">
    <thead>
    <tr>
      <th>Date</th>
      <th>Currency</th>
      <th>Amount</th>
    </tr>
    </thead>
    <tbody>
    <tr *ngFor="let tx of transactions">
      <td>{{ tx.date || tx.transactionDate || tx.createdAt | date:'dd/MM/yyyy' }}</td>
      <td>{{ tx.currency || tx.currencyCode }}</td>
      <td>{{ tx.amount | number:'1.2-2' }}</td>
    </tr>
    </tbody>
  </table>

  <ng-template #noTransactions>
    <p class="no-tx">No transactions found for this card.</p>
  </ng-template>



  <button class="remove-btn" (click)="removeCard()">Remove Card</button>
</div>

<ng-template #loadingOrError>
  <p *ngIf="loading">Loading card details...</p>
  <p *ngIf="error">{{ error }}</p>
</ng-template>
